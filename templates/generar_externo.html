<!DOCTYPE html>
<html lang="es">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Generador de Códigos QR</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/css/bootstrap-select.min.css">
    <link rel="shortcut icon" href="/static/imagenes/favi.ico" />
</head>
<body>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  {% with messages = get_flashed_messages() %}
  {% if messages %}
      <script>
          {% for message in messages %}
              Swal.fire({
                title: "¡Éxito!",
                text: "{{ message }}",
                icon: "success"
              });
          {% endfor %}
      </script>
  {% endif %}
  {% endwith %}
{% include 'navbar.html' %}
<br>
<div class="card container mt-4">
  <div class="card-body">
      <h1 class="card-title text-center mb-4">Generador de Códigos QR para tercero</h1>
      <form method="post" action="{{ url_for('generar_externo') }}" class="mx-auto">
          <div class="row">
              <!-- Columna 1 -->
              <div class="col-md-6">
                  <div class="mb-3">
                      <label for="prefijo" class="form-label">Área:</label>
                      <select class="form-select" name="prefijo" required>
                          <option value="T">Tercero</option>
                      </select>
                  </div>
                  <div class="mb-3">
                      <label for="identificacion" class="form-label">Identificación:</label>
                      <input type="number" class="form-control" name="identificacion" required />
                  </div>
                  <div class="mb-3">
                    <label for="nombre" class="form-label">Nombre:</label>
                    <input type="text" class="form-control" name="nombre" required />
                </div>
                <div class="mb-3">
                    <label for="correo" class="form-label">Correo Electrónico:</label>
                    <input type="email" class="form-control" name="correo" />
                </div>
                <div class="mb-3">
                    <label for="nombre" class="form-label">Compañia que representa:</label>
                    <input type="text" class="form-control" name="compañia" required />
                </div>
              </div>
              <!-- Columna 2 -->
              <div class="col-md-6">
                <div class="mb-3">
                    <label for="nombre" class="form-label">Motivo de la visita:</label>
                    <input type="text" class="form-control" name="motivo" required />
                </div>
                <div class="mb-3">
                    <label for="nombre" class="form-label">Dependencia visitada:</label>
                    <select id="dependencia" class="form-select" name="dependencia" required>
                      <option value="" disabled selected>Seleccione una opción</option>
                      <option value="Administrativa">Administrativa</option>
                      <option value="Gerencial">Gerencial</option>
                      <option value="Comercial">Comercial</option>
                      <option value="Operaciones">Operaciones</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="recibe" class="form-label">Recibe:</label>
                    <select id="recibe" name="recibe" class="form-control w-100 bootstrap-select" required data-live-search="true">
                      <option value="" disabled selected>Seleccione una opción</option>
                      {% for usuario in usuarios %}
                        <option value="{{ usuario.nombre }}">{{ usuario.nombre }}</option>
                      {% endfor %}
                    </select>
                  </div>
                <div class="mb-3">
                    <label for="nombre" class="form-label">ARL:</label>
                    <input type="text" class="form-control" name="arl" required />
                </div>
                <div class="mb-3">
                    <label for="nombre" class="form-label">Ingresa equipo:</label>
                    <select id="equipo" class="form-select" name="equipo" required>
                        <option value="" disabled selected>Seleccione una opción</option>
                        <option value="Tablet">Tablet</option>
                        <option value="PC">PC</option>
                        <option value="N/A">N/A</option>
                    </select>
                </div>
              </div>
          </div>
          <button type="submit" class="btn btn-success mx-auto">Generar QR</button>
      </form>

      {% if mensaje %}
          <div class="alert alert-success mt-3 text-center" role="alert">
              {{ mensaje }}
          </div>
      {% endif %} 
      {% if qr_path %}
          <img src="{{ qr_path }}" alt="Código QR" class="img-fluid mt-3 mx-auto" />
      {% endif %}
  </div>
</div>


      <br><br><br>
      <footer class="bg-light p-3 text-center">
        <p class="mb-0">&copy; 2024 - Todos los derechos reservados | Maestri on Track S.A.S</p>
      </footer>

      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      $(document).ready(function() {
        // Colapsamos la barra de navegación al cargar la página
        $("#navbarSupportedContent").collapse("hide");
      
        // Escuchamos el evento click del navbar-toggler
        $(".navbar-toggler").click(function() {
          // Colapsamos o expandimos la barra de navegación
          $("#navbarSupportedContent").collapse("toggle");
        });
      });
      </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/js/bootstrap-select.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.full.min.js"></script>

    <script>
        $(document).ready(function() {
            // Inicializar select2 para el select de área
            $('#recibe').select2({
                theme: 'bootstrap-5',
                allowClear: true,
                placeholder: 'Seleccione una opcion',
            });
        });
    </script>
</body>
</html>