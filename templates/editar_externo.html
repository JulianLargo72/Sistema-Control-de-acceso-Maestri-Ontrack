<!DOCTYPE html>
<html lang="es">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Editar tercero</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/css/bootstrap-select.min.css">
    <link rel="shortcut icon" href="/static/imagenes/favi.ico" />
  </head>
  <body>
    {% include 'navbar.html' %}
    <br>
    <div class="container mt-4">
        <div class="card">
            <div class="card-body">
                <h1 class="card-title text-center">Editar Usuario Tercero</h1>
                <br>
                <form method="post" action="/editar_externo/{{ externo.id }}">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="prefijo" class="form-label">Área:</label>
                                <select class="form-select" name="prefijo" data-width="auto" required>
                                    <option value="T" {% if externo.area == 'T' %} selected {% endif %}>Tercero</option>
                                    <!-- Aquí puedes agregar más opciones según sea necesario -->
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <label for="identificacion" class="form-label">Identificación:</label>
                                <input type="number" value="{{ externo.identificacion }}" class="form-control" name="identificacion" readonly />
                            </div>
                            <div class="mb-3">
                                <label for="nombre" class="form-label">Nombre:</label>
                                <input type="text" value="{{ externo.nombre }}" class="form-control" name="nombre" readonly />
                            </div>
                            <div class="mb-3">
                                <label for="correo" class="form-label">Correo:</label>
                                <input type="email" id="correo" name="correo" value="{{ externo.correo }}" class="form-control" required>
                            </div>
                            <div class="mb-3">
                                <label for="compañia" class="form-label">Compañía:</label>
                                <input type="text" id="compañia" name="compañia" value="{{ externo.compañia }}" class="form-control" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="motivo" class="form-label">Motivo:</label>
                                <input type="text" id="motivo" name="motivo" value="{{ externo.motivo }}" class="form-control" required>
                            </div>
                            <div class="mb-3">
                                <label for="dependencia" class="form-label">Dependencia:</label>
                                <select id="dependencia" name="dependencia" class="form-control" required>
                                    <option value="Administrativa" {% if externo.area == 'Administrativa' %} selected {% endif %}>Administrativa</option>
                                    <option value="Gerencial" {% if externo.area == 'Gerencial' %} selected {% endif %}>Gerencial</option>
                                    <option value="Comercial" {% if externo.area == 'Comercial' %} selected {% endif %}>Comercial</option>
                                    <option value="Operaciones" {% if externo.area == 'Operaciones' %} selected {% endif %}>Operaciones</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="recibe" class="form-label">Recibe:</label>
                                <select id="recibe" name="recibe" class="form-control w-100 bootstrap-select" data-width="auto" required data-live-search="true">
                                <option value="{{ externo.recibe }}">{{ externo.recibe }}</option>
                                  {% for usuario in usuarios %}
                                    <option value="{{ usuario.nombre }}">{{ usuario.nombre }}</option>
                                  {% endfor %}
                                </select>
                              </div>
                            <div class="mb-3">
                                <label for="arl" class="form-label">ARL:</label>
                                <input type="text" id="arl" name="arl" value="{{ externo.arl }}" class="form-control" required>
                            </div>
                            <div class="mb-3">
                                <label for="equipo" class="form-label">Equipo:</label>
                                <select id="equipo" name="equipo" class="form-control" data-width="auto" required>
                                    <option value="Tablet" {% if externo.equipo == 'Tablet' %} selected {% endif %}>Tablet</option>
                                    <option value="PC" {% if externo.equipo == 'PC' %} selected {% endif %}>PC</option>
                                    <option value="N/A" {% if externo.equipo == 'N/A' %} selected {% endif %}>N/A</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="qr_path" class="form-label">Código QR:</label>
                                <br>
                                <img src="/{{ externo['qr_path'] }}" class="img-fluid" alt="QR Code">
                            </div>
                        </div>
                    </div>
                    <br>
                    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                </form>
            </div>
        </div>
    </div>
    
    <br><br><br>
    <footer class="bg-light p-3 text-center">
      <p class="mb-0">&copy; 2024 - Todos los derechos reservados | Maestri on Track S.A.S</p>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/js/bootstrap-select.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.full.min.js"></script>

    <script>
        $(document).ready(function() {
            // Inicializar select2 para el select de nombre de usuario
            $('#dependencia').select2({
                theme: 'bootstrap-5',
                allowClear: true,
                placeholder: 'Seleccione una opcion',
            });
        
            // Inicializar select2 para el select de identificación de usuario
            $('#recibe').select2({
                theme: 'bootstrap-5',
                allowClear: true,
                placeholder: 'Seleccione una opcion',
            });

            $('#equipo').select2({
                theme: 'bootstrap-5',
                allowClear: true,
                placeholder: 'Seleccione una opcion',
            });
        });
    </script>
  </body>
</html>
